<!-- index.html -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Send a Confession</title>
</head>
<body>
  <h2>Confess Your Feelings ❤️</h2>
  <form id="confessionForm">
    <textarea id="message" placeholder="Write your message..." required></textarea><br>
    <input type="text" id="recipient" placeholder="Who is it for?" required><br>
    <button type="submit">Send</button>
  </form>

  <p id="responseText"></p>

  <script>
    document.getElementById('confessionForm').addEventListener('submit', async function(e) {
      e.preventDefault();
      
      const message = document.getElementById('message').value;
      const recipient = document.getElementById('recipient').value;

      const response = await fetch('http://localhost:3000/confess', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify({ message, recipient })
      });

      const result = await response.json();
      document.getElementById('responseText').textContent = result.message || "Something went wrong!";
    });
  </script>
  <form id="confessionForm" style="max-width:400px;margin:30px auto;">
    <input type="text" id="to" placeholder="To (Name)" required style="width:100%;padding:10px;margin:10px 0;" />
    <textarea id="message" placeholder="Write your confession..." required style="width:100%;padding:10px;height:100px;margin:10px 0;"></textarea>
    <button type="submit" style="padding:10px 20px;">Send Confession</button>
  </form>
  <script>
    document.getElementById("confessionForm").addEventListener("submit", async function (e) {
      e.preventDefault();
  
      const data = {
        to: document.getElementById("to").value,
        message: document.getElementById("message").value
      };
  
      const response = await fetch("https://your-backend-url.onrender.com/confess", {
        method: "POST",
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify(data)
      });
  
      const result = await response.json();
      alert(result.message || "Confession sent!");
      
      // Clear the form
      document.getElementById("confessionForm").reset();
    });
  </script>
    
</body>
</html>
